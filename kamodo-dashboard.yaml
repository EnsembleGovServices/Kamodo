import:
  dcc: dash_core_components
  html: dash_html_components
  dbc: dash_bootstrap_components

external_stylesheets:
  #  - https://codepen.io/chriddyp/pen/bWLwgP.css
  - https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css
  - assets/css/dashboard.css

external_scripts:
  - https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML
  - assets/js/dashboard.js
  - https://code.jquery.com/jquery-3.6.0.js
  - https://code.jquery.com/ui/1.12.1/jquery-ui.js
  - https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js
  - https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js


app:
  jupyter_dash.JupyterDash:
    external_stylesheets: ${external_stylesheets}
    external_scripts: ${external_scripts}
    title: kamodo-dashboard
    suppress_callback_exceptions: True

#app:
#  dash_extensions.enrich.DashProxy:
#    external_stylesheets: ${external_stylesheets}
#    external_scripts: ${external_scripts}
#    title: kamodo-dashboard
#    prevent_initial_callbacks: True
#    transforms:
#      - dash_extensions.enrich.MultiplexerTransform:


header:
  html.Div:
    children:
      - dbc.Row:
          children:
            - dbc.Col:
                width: 1
                children:
                  - html.H3: LOGO
                className: logo
            - dbc.Col:
                width: 11
                children: HEADER
                className: header


side-menubar:
  dbc.Col:
    width: 1
    children:
      - dbc.Tabs:
          children:
            - dbc.Tab:
                label: Workflow
                tab_id: workflow_tab
            - dbc.Tab:
                label: Models
                tab_id: models_tab
            - dbc.Tab:
                label: Datasets
                tab_id: datasets_tab
            - dbc.Tab:
                label: Editor
                tab_id: editor_tab
          id: SideMenuBarTabs
          active_tab: workflow_tab
    className: justify-content-center side-menubar

menubar-details:
  dbc.Col:
    width: 3
    children:
      - html.Div:
          id: content
    className: justify-content-center menubar-details


graph:
  dbc.Row:
    children:
      - dbc.Col:
          children:
            - dbc.Button:
                children: PLOT
                id: plot-graph
                className: mr-1 plot-graph
                color: primary
                size: md
                n_clicks: 0
            - dbc.Button:
                children: REMOVE
                id: remove-graph
                className: mr-1 remove-graph
                color: primary
                size: md
                n_clicks: 0
            - html.Div:
                children:
                  - dcc.Graph:
                      id: my-graph-empty
                id: kamodo-graph
                className: kamodo-graph
    className: graph-container

custom-function-graph:
  html.Div:
    children:
      - dbc.Row:
          children:
            - html.Div:
                children:
                  - html.H1:
                      children: Plot Custom Function
                      className: custom-function-header
                className: function-header-area
          className: justify-content-center
      - dbc.Row:
          children:
            - dbc.Col:
                children:
                  - dbc.Input:
                      placeholder: Enter your function here...
                      bs_size: lg
                      id: custom-function-input
                      className: mb-3 custom-function-input
                width: 12
          className: justify-content-center
      - dbc.Row:
          children:
            - dbc.Col:
                children:
                  - dbc.Input:
                      placeholder: Enter your data here...
                      bs_size: lg
                      id: custom-function-data
                      className: mb-3 custom-function-data
                width: 12
          className: justify-content-center
    className: container custom-function-container

graph-section:
  dbc.Col:
    children:
      - ${graph}
      - ${custom-function-graph}
    className: graph-section
    id: graph-section
    width: 6



model-list:
  html.Div:
    children:
      - dbc.Row:
          className: justify-content-center selected-models
          id: selected-models
    className: container selected-model-names
    id: selected-model-names

model-types-section:
  dbc.Col:
    children:
      - html.H4:
          children: Model Type Section
          className: model-type-section-header
      - ${model-list}
    className: model-types-section justify-content-center
    id: model-types-section
    width: 2

content-section:
  dbc.Row:
    children:
      - ${side-menubar}
      - ${menubar-details}
      - ${graph-section}
      - ${model-types-section}
    style:
      height: 100vw

layout:
  html.Div:
    children:
      - dcc.Location:
          id: url
      - html.Div:
          children:
            - ${header}
            - ${content-section}
          className: container-fluid h-100
    className: kamodo-dashboard



callbacks:
  sidemenubar_callback:
    output:
      - id: content
        attr: children
    input:
      - id: SideMenuBarTabs
        attr: active_tab
    callback: kamodo_callbacks.update_menubar_details


  model_callback:
    output:
      - id: collapse-CTIPe
        attr: is_open
      - id: collapse-GITM
        attr: is_open
      - id: collapse-IRI
        attr: is_open
    input:
      - id: CTIPe-toggle
        attr: n_clicks
      - id: GITM-toggle
        attr: n_clicks
      - id: IRI-toggle
        attr: n_clicks
    state:
      - id: collapse-CTIPe
        attr: is_open
      - id: collapse-GITM
        attr: is_open
      - id: collapse-IRI
        attr: is_open
    callback: kamodo_callbacks.toggle_model_cards_accordion

  plot_graph:
    output:
      - id: kamodo-graph
        attr: children
    input:
      - id: custom-function-input      # I AM TAKING INPUT VALUES HERE FOR CUSTOM GENERATION
        attr: value
      - id: custom-function-data        # DATA FOR THAT CUSTOM FUNCTION
        attr: value
      - id: B_north-button            # FROM THIS ALL PYSAT MODEL NAMES
        attr: n_clicks
      - id: B_up-button
        attr: n_clicks
      - id: B_west-button
        attr: n_clicks
      - id: B_IGRF_north-button
        attr: n_clicks
      - id: B_IGRF_up-button
        attr: n_clicks
      - id: B_IGRF_west-button
        attr: n_clicks
      - id: latitude-button
        attr: n_clicks
      - id: longitude-button
        attr: n_clicks
      - id: altitude-button
        attr: n_clicks
      - id: dB_zon-button
        attr: n_clicks
      - id: dB_mer-button
        attr: n_clicks
      - id: dB_par-button
        attr: n_clicks
      - id: year-button
        attr: n_clicks
      - id: dayofyear-button
        attr: n_clicks
      - id: B_flag-button
        attr: n_clicks
      - id: remove-graph
        attr: n_clicks
    callback: kamodo_callbacks.graph_function

  model_names:
    output:
      - id: selected-models
        attr: children
    input:
      - id: CTIPe-toggle
        attr: n_clicks
    callback: kamodo_callbacks.get_selected_model_names


#  custom_function:
#    output:
#      - id: kamodo-graph
#        attr: children
#    input:
#      - id: custom-function-input
#        attr: value
#      - id: custom-function-data
#        attr: value
#    callback: kamodo_callbacks.plot_custom_function